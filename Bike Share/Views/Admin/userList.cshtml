@using BikeShare.Views
@model BikeShare.ViewModels.PaginatedViewModel<BikeShare.Models.bikeUser>

@{
    ViewBag.Title = "All Users";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section menuSection{
    @Html.Partial("_AdminMenuPartial")
}
<h3 class="text-center"><span class="glyphicon glyphicon-user pull-left"></span> Users <a class="btn btn-primary pull-right" data-toggle="modal" data-target="#siteModal" href="@Url.Action("newUser")"><span class="glyphicon glyphicon-user"></span>  New User</a></h3>
<hr />
@section filterSection{
@using (Html.BeginForm(actionName: "userList", controllerName: "Admin"))
{
    <div class="panel panel-primary">
        <div class="panel-heading"><h4 class="panel-title"><span class="glyphicon glyphicon-filter"></span> Filters</h4></div>
        <div class="panel-body">

            <div class="col-md-12">
                <h4>Status</h4>
                <div class="form-inline">@Html.Label("hasCharges") @Html.CheckBox("hasCharges") </div>
                <div class="form-inline">@Html.Label("hasBike") @Html.CheckBox("hasBike") </div>
            </div>

            <div class="col-md-12">
                <h4>Privilege</h4>
                <div class="form-inline">@Html.Label("canMaintain") @Html.CheckBox("canMaintain") </div>
                <div class="form-inline">@Html.Label("canAdmin") @Html.CheckBox("canAdmin") </div>
                <div class="form-inline">@Html.Label("canRide") @Html.CheckBox("canRide") </div>
                <div class="form-inline">@Html.Label("canCheckout") @Html.CheckBox("canCheckout") </div>
            </div>

        </div>
        <div class="panel-footer text-right">
            <input type="submit" value="Filter" class="btn btn-primary" role="button" />
        </div>
    </div>
}
    }
<div class="row">
@foreach (var user in Model.modelList)
{
    <div class="col-md-6">
        <div class="panel panel-default">
            @if (user.isArchived)
            {
                <div class="panel-heading"><h4 class="panel-title"><span><img src="@BikeShare.Views.Gravatar.url(user.email)?s=30&d=identicon" /></span> @user.userName <label class="label label-danger pull-right"> Archived</label></h4></div>
            }
            else
            {
                <div class="panel-heading"><h4 class="panel-title"><span><img src="@BikeShare.Views.Gravatar.url(user.email)?s=30&d=identicon" /></span> @user.userName</h4></div>
            }
            <div class="panel-body"><p>@user.email - @user.checkOuts.Count() rentals</p></div>
            <div class="text-right panel-footer">
                <a class="btn btn-default" href="@Url.Action(actionName: "userDetails", controllerName: "Admin", routeValues: new { userId = @user.bikeUserId})"><span class="glyphicon glyphicon-user"></span>  Details</a>
                <a class="btn btn-default" href="@Url.Action(actionName: "chargesForUser", controllerName: "Admin", routeValues: new { userId = @user.bikeUserId })"><span class="glyphicon glyphicon-shopping-cart"></span>  Charges</a>
                <a class="btn btn-default" href="@Url.Action(actionName: "bikeCheckouts", controllerName: "Admin", routeValues: new { userId = @user.bikeUserId })"><span class="glyphicon glyphicon-time"></span>  Rentals</a>
                <a class="btn btn-primary" data-toggle="modal" data-target="#siteModal" href="@Url.Action("userEdit", new { userId = user.bikeUserId})"><span class="glyphicon glyphicon-pencil"></span>  Edit</a>
            </div>
        </div>
    </div>
}
</div>
<hr />
<div>@Html.PageLinks(Model.pagingInfo, x => Url.Action("userList", new { page = x }))</div>